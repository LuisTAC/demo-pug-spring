doctype
html(lang="en")
  include ../includes/header
  body
  #layout
    a(href="#menu" id="menuLink" class="menu-link")
      span
    #menu
      include ../includes/menu
      +menu("integrations")
    #main
      .content
        .pure-g
          .pure-u-1-2
            h2 Integration
        .pure-g
          .pure-u-1-1
            table.pure-table.pure-table-horizontal
              thead
                tr
                  th #
                  th Message
                  th Sending Application
                  th Receiving Application
              tbody
                tr
                  td=integration.id
                  td=integration.message.code
                  td=integration.sendingApp.code
                  td=integration.receivingApp.code
          .pure-u-1-1
            h3 Mapper List
            form(name="integration" action="/integrations/update" method="POST")
              input(type="hidden" name="id" value=integration.id)
              table.pure-table.pure-table-horizontal
                thead
                  tr
                    th #
                    th Keys
                    th Value
                    th Category
                    th ON
                tbody
                  each item in mappers
                    tr
                      td=item.id
                      td=PugHelper.join(",", item.key)
                      td=item.value
                      td=item.category
                      td
                        if (integration.hasMapper(item.id))
                          input(type="checkbox" id="included" name="mappers" "checked" value=item.id)
                        else
                          input(type="checkbox" id="included" name="mappers" value=item.id)
              p
                button.pure-button.pure-button-primary(type="submit") Update Integration
  script.
    function popup(text) {
      alert(text)
    }
  include ../includes/footer